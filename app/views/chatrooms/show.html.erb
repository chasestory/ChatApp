<p id="notice"><%= notice %></p>
<div style="margin-left: 5px;">

  <p>
    <strong>Channel:</strong>
    <i><%= @chatroom.name %></i>
  </p>

  <% unread_messages = false %>
  <div data-behavior="messages" data-chatroom-id='<%= @chatroom.id %>'>
    <% @messages.each do |message| %>
      <% if !unread_messages && @chatroom_user.last_read_at < message.created_at %>
        <% unread_messages = true %>
        <div class="strike"><span>Unread Message</span></div>
      <% end %>

        <div>
          <%= render message %>
        </div>
      <% end %>
  </div>

  <%= link_to 'Edit', edit_chatroom_path(@chatroom) %> |
  <%= link_to 'Back', chatrooms_path %>

  <hr />
  <div style="margin-bottom: 15px;">
    <%= form_for [@chatroom, Message.new] do |f| %>
      <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
      <%= f.label "Message" %>
      <%= f.text_area :body, rows: 1, class: 'form-control message', autofocus: true %>
    <% end %>
  </div>

</div>